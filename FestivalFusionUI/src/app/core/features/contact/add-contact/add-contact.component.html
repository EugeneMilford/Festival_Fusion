<div class="container">
  <!-- Breadcrumb for Contact -->
  <nav aria-label="breadcrumb" class="mt-3">
    <ol class="breadcrumb bg-white px-3 py-2 rounded-3 shadow-sm">
      <li class="breadcrumb-item">
        <a [routerLink]="['/home']" class="text-decoration-none fw-bold">
          <i class="bi bi-house-door"></i> Home
        </a>
      </li>
      <li class="breadcrumb-item active fw-bold text-dark" aria-current="page">
        Contact
      </li>
    </ol>
  </nav>
  <!-- End Breadcrumb -->

  <h3 class="mt-4 mb-4 text-center text-gradient">Add Contact</h3>

  <!-- Only show form to authenticated users; everyone authorized (authenticated) can send a message -->
  <ng-container *ngIf="isAuthenticated(); else notAuthenticated">
    <div class="row justify-content-center">
      <div class="col-lg-8">
        <form #form="ngForm" (ngSubmit)="onContactSubmit()" class="p-4 rounded-4 shadow-lg bg-white">
          <div class="row gy-4">
            
            <div class="col-md-6">
              <label for="name">Name</label>
              <div class="form-floating">
                <input 
                  type="text" 
                  id="name"
                  name="name" 
                  class="form-control" 
                  placeholder="Name" 
                  required 
                  [(ngModel)]="model.name">
              </div>
            </div>
    
            <div class="col-md-6">
              <label for="surname">Surname</label>
              <div class="form-floating">
                <input 
                  type="text" 
                  id="surname"
                  name="surname" 
                  class="form-control" 
                  placeholder="Surname" 
                  required 
                  [(ngModel)]="model.surname">
              </div>
            </div>
    
            <div class="col-md-12">
              <label for="phoneNumber">Phone Number</label>
              <div class="form-floating">
                <input 
                  type="tel" 
                  id="phoneNumber"
                  name="phoneNumber" 
                  class="form-control" 
                  placeholder="Phone Number" 
                  required 
                  [(ngModel)]="model.phoneNumber">
              </div>
            </div>
    
            <div class="col-md-12">
              <label for="message">Your Message</label>
              <div class="form-floating">
                <textarea 
                  id="message"
                  name="message" 
                  class="form-control" 
                  placeholder="Your Message" 
                  style="height: 150px;"
                  required 
                  [(ngModel)]="model.message"></textarea>
              </div>
            </div>
    
            <div class="col-md-12 text-center mt-4">
              <button type="submit" class="btn btn-primary btn-lg px-5 rounded-pill shadow">Submit Contact</button>
            </div>
    
          </div>
        </form>
      </div>
    </div>
  </ng-container>

  <ng-template #notAuthenticated>
    <div class="alert alert-warning">
      <i class="bi bi-exclamation-triangle-fill"></i>
      You must be signed in to send a message. Please
      <a [routerLink]="['/auth/login']" class="text-decoration-underline">sign in</a>
      or contact an administrator for access.
    </div>
  </ng-template>
</div>

<!-- Modal Backdrop -->
<div class="modal-backdrop fade" *ngIf="showModal" [class.show]="showModal" style="display: block;"></div>

<!-- Modal -->
<div class="modal fade" *ngIf="showModal" [class.show]="showModal" tabindex="-1" role="dialog" aria-modal="true" style="display: block;">
  <div class="modal-dialog modal-dialog-centered" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Message Sent!</h5>
        <button type="button" class="btn-close" (click)="closeModal()" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <p>Your message has been sent successfully.</p>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-primary" (click)="closeModal()">OK</button>
      </div>
    </div>
  </div>
</div>
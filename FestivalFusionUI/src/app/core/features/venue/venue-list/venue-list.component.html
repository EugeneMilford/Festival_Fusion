<div class="container">

  <!-- Breadcrumb for Venues -->
  <nav aria-label="breadcrumb" class="mt-3">
    <ol class="breadcrumb bg-white px-3 py-2 rounded-3 shadow-sm">
      <li class="breadcrumb-item">
        <a routerLink="/" class="text-decoration-none fw-bold">
          <i class="bi bi-house-door"></i> Home
        </a>
      </li>
      <li class="breadcrumb-item active fw-bold text-dark" aria-current="page">
        Venues
      </li>
    </ol>
  </nav>
  <!-- End Breadcrumb -->

  <h1 class="mt-3">List of Venues</h1>

  <div class="d-flex justify-content-end mt-3">
    <a [routerLink]="['/admin/venue/add']" class="btn btn-primary">Add New Venue</a>
  </div>

  <br>

  <ng-container *ngIf="venues$ | async as venues">
    <div class="row">
      <div class="col-xs-12 col-md-6 col-lg-4" *ngFor="let venue of venues">
        <div class="card mb-4" style="min-height: 350px;">
          <img
            [src]="venue.venueImageUrl || 'assets/default-venue.jpg'"
            class="card-img-top"
            [alt]="venue.name"
            style="height: 200px; object-fit: cover;">
          <div class="card-body">
            <h5 class="card-title">{{venue.name}}</h5>
            <h6 class="card-subtitle mb-2 text-muted">{{venue.address}}</h6>
            <h6 class="card-subtitle mb-2 text-muted">Capacity: {{venue.capacity}}</h6>
            <a class="btn btn-sm btn-outline-primary"
               [routerLink]="['/admin/venue', venue.venueId]">
              Edit
            </a>
            <button 
              class="btn btn-sm btn-outline-secondary" 
              (click)="openVenueModal(venue)">
              Read More
            </button>
          </div>
        </div>            
      </div>
    </div>
  </ng-container>

</div>

<!-- Venue Modal -->
<div class="modal fade" 
     id="venueModal" 
     tabindex="-1" 
     aria-labelledby="venueModalLabel" 
     aria-hidden="true"
     *ngIf="selectedVenue">
  <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable modal-xl">
    <div class="modal-content">
      <div class="modal-header">
        <h3 class="modal-title" id="venueModalLabel">{{selectedVenue.name}}</h3>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <!-- Venue Image -->
        <div class="venue-modal-image mb-4" *ngIf="selectedVenue.venueImageUrl">
          <img 
            [src]="selectedVenue.venueImageUrl" 
            [alt]="selectedVenue.name"
            class="img-fluid rounded-3 w-100"
            style="max-height: 500px; object-fit: cover;">
        </div>

        <!-- Venue Meta Info -->
        <div class="venue-meta mb-4">
          <div class="d-flex flex-wrap gap-3 mb-3">
            <span class="badge bg-primary">
              <i class="bi bi-geo-alt"></i> {{selectedVenue.address}}
            </span>
            <span class="badge bg-info">
              <i class="bi bi-people"></i> Capacity: {{selectedVenue.capacity}}
            </span>
          </div>
        </div>

        <!-- Venue Details -->
        <div class="venue-content">
          <h5 class="mb-3">Venue Information</h5>
          <div class="row">
            <div class="col-md-6">
              <p><strong><i class="bi bi-building"></i> Venue Name:</strong></p>
              <p class="ms-3">{{selectedVenue.name}}</p>
            </div>
            <div class="col-md-6">
              <p><strong><i class="bi bi-pin-map"></i> Address:</strong></p>
              <p class="ms-3">{{selectedVenue.address}}</p>
            </div>
            <div class="col-md-6">
              <p><strong><i class="bi bi-people-fill"></i> Maximum Capacity:</strong></p>
              <p class="ms-3">{{selectedVenue.capacity}} attendees</p>
            </div>
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
        <a [routerLink]="['/admin/venue', selectedVenue.venueId]" 
           class="btn btn-primary" 
           data-bs-dismiss="modal">
          <i class="bi bi-pencil"></i> Edit Venue
        </a>
      </div>
    </div>
  </div>
</div>

